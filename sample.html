<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>TABULAR SAMPLE</title>
</head>
<link rel="stylesheet" href="./tabular.css" media="all">
<script src="./tabular.js"></script>

<body>
    <div style="margin: auto auto; width: 800px; ">
        <h4>Below Table has been built with Array of JSON as source data</h4>

        <div id="buildTable"></div>
    </div>
    <div style="margin: auto auto; width: 800px; margin-top: 60px">
        <hr>
    </div>
    <div style="margin: auto auto; width: 800px; ">
        <h4>Below Table has been converted from an HTML table</h4>

        <table id="convertTable" type="" border="0" tabindex="20">
            <tbody>
                <tr>
                    <th>Request ID</th>
                    <th>Filename</th>
                    <th>TimeStamp</th>
                    <th>Status</th>
                    <th>Link</th>
                </tr>
                <tr>
                    <td>1522746015946</td>
                    <td>Report-1522746015946.csv</td>
                    <td>2018/04/03 14:30:15</td>
                    <td class="success-msg">READY</td>
                    <td>
                        <a href="https://sandbox-cdn.formistry.com/0010000010010I/00000005/Report-1522746015946.csv" target="_blank">Download</a>
                    </td>
                </tr>
                <tr>
                    <td>1522744572849</td>
                    <td>Report-1522744572849.csv</td>
                    <td>2018/04/03 14:06:12</td>
                    <td class="success-msg">READY</td>
                    <td>
                        <a href="https://sandbox-cdn.formistry.com/0010000010010I/00000005/Report-1522744572849.csv" target="_blank">Download</a>
                    </td>
                </tr>
                <tr>
                    <td>1522743671284</td>
                    <td>Report-1522743671284.csv</td>
                    <td>2018/04/03 13:51:11</td>
                    <td class="success-msg">READY</td>
                    <td>
                        <a href="https://sandbox-cdn.formistry.com/0010000010010I/00000005/Report-1522743671284.csv" target="_blank">Download</a>
                    </td>
                </tr>
                <tr>
                    <td>1522651779116</td>
                    <td>Report-1522651779116.csv</td>
                    <td>2018/04/02 12:19:39</td>
                    <td class="success-msg">READY</td>
                    <td>
                        <a href="https://sandbox-cdn.formistry.com/0010000010010I/00000005/Report-1522651779116.csv" target="_blank">Download</a>
                    </td>
                </tr>
                <tr>
                    <td>1522649933815</td>
                    <td>Report-1522649933815.csv</td>
                    <td>2018/04/02 11:48:53</td>
                    <td class="success-msg">READY</td>
                    <td>
                        <a href="https://sandbox-cdn.formistry.com/0010000010010I/00000005/Report-1522649933815.csv" target="_blank">Download</a>
                    </td>
                </tr>
                <tr>
                    <td>1522649929351</td>
                    <td>Report-1522649929351.csv</td>
                    <td>2018/04/02 11:48:49</td>
                    <td class="success-msg">READY</td>
                    <td>
                        <a href="https://sandbox-cdn.formistry.com/0010000010010I/00000005/Report-1522649929351.csv" target="_blank">Download</a>
                    </td>
                </tr>
                <tr>
                    <td>1522649752568</td>
                    <td>Report-1522649752568.csv</td>
                    <td>2018/04/02 11:45:52</td>
                    <td class="success-msg">READY</td>
                    <td>
                        <a href="https://sandbox-cdn.formistry.com/0010000010010I/00000005/Report-1522649752568.csv" target="_blank">Download</a>
                    </td>
                </tr>
                <tr>
                    <td>1522649712699</td>
                    <td>Report-1522649712699.csv</td>
                    <td>2018/04/02 11:45:12</td>
                    <td class="success-msg">READY</td>
                    <td>
                        <a href="https://sandbox-cdn.formistry.com/0010000010010I/00000005/Report-1522649712699.csv" target="_blank">Download</a>
                    </td>
                </tr>
                <tr>
                    <td>1522649643937</td>
                    <td>Report-1522649643937.csv</td>
                    <td>2018/04/02 11:44:03</td>
                    <td class="success-msg">READY</td>
                    <td>
                        <a href="https://sandbox-cdn.formistry.com/0010000010010I/00000005/Report-1522649643937.csv" target="_blank">Download</a>
                    </td>
                </tr>
                <tr>
                    <td>1522649635742</td>
                    <td>Report-1522649635742.csv</td>
                    <td>2018/04/02 11:43:55</td>
                    <td class="success-msg">READY</td>
                    <td>
                        <a href="https://sandbox-cdn.formistry.com/0010000010010I/00000005/Report-1522649635742.csv" target="_blank">Download</a>
                    </td>
                </tr>
                <tr>
                    <td>1522569927471</td>
                    <td>Report-1522569927471.csv</td>
                    <td>2018/04/01 13:35:27</td>
                    <td class="error-msg">FAILED</td>
                    <td>
                        <a href="undefined" target="_blank"></a>
                        <i class="fa fa-refresh fa-spin"></i>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</body>

<script type="text/javascript">
    let CT = new TABULAR();
    let BT = new TABULAR();

    //CT.convertToTabular('convertTable');

    let sampleData = [
        {
            "regNo": "3455243543",
            "name": "Siddharth Shukla",
            "pwd": true,
            "paid": true,
            "scheduled": false,
            "disability": "Others, hearing impaired",
            "gcComment": "No Support",
            "pearsonComment": "No SUpport",
            "fid": "0010000010010I",
            "uid": "00000005"
        }, {
            "regNo": "3455243777",
            "name": "Aman Gupta",
            "pwd": false,
            "paid": false,
            "scheduled": false,
            "disability": "Others, speaking impaired",
            "gcComment": "",
            "pearsonComment": "",
            "fid": "0010000010010I",
            "uid": "00000005"
        }
    ];

    let headerConfig = {
        // "allowedAll": true,
        // "allowedKeys": [],
        // "disallowedKeys": [], ---> These 3 have to be worked upon...
        "fields": {
            "regNo": {},
            "name": {},
            "disability": {},
            "pwd": {
                "label": "Processed?",
                "type": "label",
                "filter": ['Processed', 'Un-processed'],
                "title": (pwd) => {
                    if (pwd)
                        return ["Processed", "green"];
                    else
                        return "Un-processed";
                }
            },
            "paid": {
                "label": "Paid?",
                "type": "label",
                "filter": ['Paid', 'Unpaid'],
                "title": (paid) => {
                    if (paid)
                        return ["Paid", "green"];
                    else
                        return ["Unpaid", "red"];
                }
            },
            "scheduled": {
                "label": "Scheduled?",
                "type": "label",
                "filter": ['Scheduled', 'Not Scheduled'],
                "title": (scheduled) => {
                    if (scheduled)
                        return ["Scheduled", "green"];
                    else
                        return ["Not Scheduled", "red"];
                }
            }
        },
        "_Actions_": {
            "actions": {
                "process": {
                    "title": "Process PWD",
                    "buttonClass": "btn-primary",
                    "attributes": {},
                    "func": (data) => {
                        //Header HTML
                        let h = `${data.name}`;
                        //Body HTML
                        let b = `<div><input value="${data.disability}" disabled></div>`
                        //Footer HTML
                        let f = `<div></div>`;
                        BT.createModalPopupFromConf(h, b, f);
                    }
                },
                "followup": {
                    "title": "Follow-Up",
                    "buttonClass": "btn-warning",
                    "func": (data) => {
                        //Header HTML
                        let h = `${data.name}`;
                        //Body HTML
                        let b = `<div><input value="${data.disability}" disabled></div>`
                        //Footer HTML
                        let f = `<div></div>`;
                        BT.createModalPopupFromConf(h, b, f);
                    }
                }
            },
            // "funcDeclarations": {
            //     "process": BT.createModalPopup,
            //     "followup": BT.createModalPopup
            // },
            "actionConditions": {
                "refField": "pwd",
                "preProcessor": (process) => {
                    if (!process)
                        return ["process"];
                    else
                        return ["followup"];
                }
            }
        },
        "_Labels_": true
    };
    BT.buildTabular('buildTable', sampleData, headerConfig);

</script>

</html>